
disk:
  server:
    save-path: E://temp/disk
    form-env: true
    pwdsalt: 10
  spider-server:
    url: http://10.10.32.99:5001
    show-video: /api/v1/short-video/video/share/url/parse?url=

server:
  port: 8082

spring:
  application:
    name: disk-server
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8  # 设置时区，避免时间偏移
  servlet:
    multipart:
      location: ${java.io.tmpdir}
      max-file-size: 10GB
      max-request-size: 10GB
  datasource:
    # MySQL 连接信息
    url: jdbc:mysql://14.103.137.120:3306/disk_server?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: ubuntu
    password: ubuntu@2025@ubuntu
    driver-class-name: com.mysql.cj.jdbc.Driver # MySQL 8.x 驱动类，5.x 用 com.mysql.jdbc.Driver

    # HikariCP 连接池配置（可选，默认值已优化，按需调整）
    hikari:
      maximum-pool-size: 10 # 最大连接数（默认 10）
      minimum-idle: 5 # 最小空闲连接数（默认与最大连接数一致，建议设置为与 maximum-pool-size 相同）
      idle-timeout: 300000 # 空闲连接超时时间（毫秒，默认 600000ms=10分钟）
      connection-timeout: 20000 # 连接超时时间（毫秒，默认 30000ms=30秒）
      max-lifetime: 1800000 # 连接最大存活时间（毫秒，默认 1800000ms=30分钟）
      connection-test-query: SELECT 1 # 连接测试 SQL（MySQL 可用此语句，默认不配置时 Hikari 会自动检测）
      pool-name: MySQL-Hikari-Pool # 连接池名称（用于日志区分）

# MyBatis-Plus 配置（可选，按需配置）
mybatis-plus:
  # Mapper XML 文件路径（如果使用 XML 编写 SQL）
  mapper-locations: classpath:mapper/**/*.xml
  # 实体类包路径（用于别名映射）
  type-aliases-package: com.spring.boot.disk.server.entity
  # 全局配置
  global-config:
    db-config:
      # 主键生成策略（如自增、雪花算法等）
      id-type: AUTO
      # 表名前缀（如果数据库表名有统一前缀）
      table-prefix: t_
  # 日志配置（可选，打印 SQL 方便调试）
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl


############## Sa-Token 配置 (文档: https://sa-token.cc) ##############
sa-token:
  # token 名称（同时也是 cookie 名称）
  token-name: X-Token
  # token 有效期（单位：秒） 默认30天，-1 代表永久有效
  timeout: 2592000
  # token 最低活跃频率（单位：秒），如果 token 超过此时间没有访问系统就会被冻结，默认-1 代表不限制，永不冻结
  active-timeout: -1
  # 是否允许同一账号多地同时登录 （为 true 时允许一起登录, 为 false 时新登录挤掉旧登录）
  is-concurrent: true
  # 在多人登录同一账号时，是否共用一个 token （为 true 时所有登录共用一个 token, 为 false 时每次登录新建一个 token）
  is-share: false
  # token 风格（默认可取值：uuid、simple-uuid、random-32、random-64、random-128、tik）
  token-style: uuid
  # 是否输出操作日志
  is-log: true
  # jwt秘钥
  jwt-secret-key: asdasdasifhueuiwyurfewbfjsdafjk
  cookie:
    # 指明当前为 https 安全连接
    secure: false
    # 指明第三方 Cookie 限制级别为：不限制
    sameSite: None



